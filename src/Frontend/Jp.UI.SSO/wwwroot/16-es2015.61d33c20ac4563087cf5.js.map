{"version":3,"sources":["./src/app/panel/persisted-grants/list/persisted-grants-list.component.html","./src/app/panel/persisted-grants/list/persisted-grants-list.component.ts","./src/app/panel/persisted-grants/persisted-grants.module.ts","./src/app/panel/persisted-grants/persisted-grants.service.ts","./src/app/shared/viewModel/default-response.model.ts","./src/app/shared/viewModel/persisted-grants.model.ts"],"names":[],"mappings":"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","file":"16-es2015.61d33c20ac4563087cf5.js","sourcesContent":["<div class=\"content-heading\">\r\n    <div>\r\n        ðŸ”‘ {{ 'general.persisted-grants' | translate }}\r\n        <small><b> {{ 'persistedGrant.description' | translate }}</b></small>\r\n    </div>\r\n</div>\r\n\r\n<app-loading *ngIf=\"persistedGrants == null\"></app-loading>\r\n\r\n<!-- START card-->\r\n<div class=\"card card-default\" *ngIf=\"persistedGrants\">\r\n\r\n    <div class=\"card-body\">\r\n        <div class=\"table-responsive\">\r\n            <table class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th></th>\r\n                        <th>{{ 'persistedGrant.list.creationTime' | translate }}</th>\r\n                        <th *ngIf=\"!settings.lightVersion\"> {{ 'persistedGrant.list.username' | translate }}</th>\r\n                        <th> {{ 'persistedGrant.list.clientId' | translate }}</th>\r\n                        <th> {{ 'persistedGrant.list.type' | translate }} </th>\r\n                        <th></th>\r\n\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor=\"let grant of persistedGrants\">\r\n                        <td>\r\n                            <button class=\"btn btn-primary btn-xs\" (click)=\"details(grant.key)\" placement=\"top\" [tooltip]=\"'general.details' | translate\"><i class=\"fa fa-info\"></i></button> &nbsp;\r\n                        </td>\r\n                        <td>{{grant.creationTime | date: 'short'}}</td>\r\n                        <td *ngIf=\"!settings.lightVersion\">{{grant.email}}</td>\r\n                        <td>{{grant.clientId}}</td>\r\n                        <td>{{grant.type}}</td>\r\n                        <td>\r\n                            <button class=\"btn btn-danger btn-xs\" placement=\"top\" [tooltip]=\"'general.revoke' | translate\" (click)=\"remove(grant.key)\"><i\r\n                                    class=\"fa fa-times\"></i></button>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <p>\r\n                <small class=\"text-muted\">* If you are not an Administrator, some fields will not show.</small>\r\n            </p>\r\n\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"card-footer\">\r\n        <div class=\"d-flex\">\r\n            <div class=\"ml-auto\">\r\n                <div class=\"input-group\">\r\n                    <label class=\"col-form-label\">Items per page:&nbsp;</label>\r\n                    <select class=\"custom-select\" [(ngModel)]=\"quantity\" (change)=\"loadGrants()\">\r\n                        <option value=\"10\">10</option>\r\n                        <option value=\"20\">20</option>\r\n                        <option value=\"30\">30</option>\r\n                        <option value=\"40\">40</option>\r\n                        <option value=\"50\">50</option>\r\n                    </select>\r\n                    <ngb-pagination [collectionSize]=\"total\" [(page)]=\"page\" [maxSize]=\"5\" [rotate]=\"true\" [ellipses]=\"false\" [boundaryLinks]=\"true\" [pageSize]=\"quantity\" (pageChange)=\"loadGrants()\">\r\n                    </ngb-pagination>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- END card-->\r\n\r\n<!-- START card-->\r\n<div class=\"card card-default\" *ngIf=\"grantDetail\">\r\n    <div class=\"card-header\">\r\n        <h3>{{ 'general.details' | translate }} - {{grantDetail.clientId}} for {{grantDetail.email}}</h3>\r\n    </div>\r\n    <div class=\"card-body\">\r\n        <img *ngIf=\"grantDetail.picture\" [src]=\"grantDetail.picture\" />\r\n        <dl class=\"row\">\r\n            <dt class=\"col-sm-3 text-right\">{{ 'persistedGrant.list.email' | translate }}</dt>\r\n            <dd class=\"col-sm-9\">{{grantDetail.email}}</dd>\r\n            <dt class=\"col-sm-3 text-right\">{{ 'persistedGrant.list.key' | translate }}</dt>\r\n            <dd class=\"col-sm-9\">{{grantDetail.key}}</dd>\r\n            <dt class=\"col-sm-3 text-right\">{{ 'persistedGrant.list.type' | translate }}</dt>\r\n            <dd class=\"col-sm-9\">{{grantDetail.type}}</dd>\r\n            <dt class=\"col-sm-3 text-right\">{{ 'persistedGrant.list.clientId' | translate }}</dt>\r\n            <dd class=\"col-sm-9\">{{grantDetail.clientId}}</dd>\r\n            <dt class=\"col-sm-3 text-right\">{{ 'persistedGrant.list.creationTime' | translate }}</dt>\r\n            <dd class=\"col-sm-9\">{{grantDetail.creationTime}}</dd>\r\n            <dt class=\"col-sm-3 text-right\">{{ 'persistedGrant.list.expiration' | translate }}</dt>\r\n            <dd class=\"col-sm-9\">{{grantDetail.expiration}}</dd>\r\n            <dt class=\"col-sm-3 text-right\">{{ 'persistedGrant.list.scopes' | translate }}</dt>\r\n            <dd class=\"col-sm-9\">\r\n                <tag-input theme='bootstrap' name=\"userClaims\" [modelAsStrings]=\"true\" [disable]=\"true\" [(ngModel)]=\"grantDetail.parsedData.Scopes\">\r\n                </tag-input>\r\n            </dd>\r\n            <dt class=\"col-sm-3 text-right\">{{ 'persistedGrant.list.details' | translate }}</dt>\r\n            <dd class=\"col-sm-9\">\r\n                <pre>{{ grantDetail.parsedData | json }}</pre>\r\n            </dd>\r\n        </dl>\r\n    </div>\r\n</div>\r\n<!-- END card-->","import { Component, OnInit } from '@angular/core';\r\nimport { SettingsService } from '@core/settings/settings.service';\r\nimport { TranslatorService } from '@core/translator/translator.service';\r\nimport { ProblemDetails } from '@shared/viewModel/default-response.model';\r\nimport { PersistedGrant } from '@shared/viewModel/persisted-grants.model';\r\nimport Swal from 'sweetalert2';\r\n\r\nimport { PersistedGrantsService } from '../persisted-grants.service';\r\n\r\n@Component({\r\n    selector: \"app-persisted-grants-list\",\r\n    templateUrl: \"./persisted-grants-list.component.html\",\r\n    styleUrls: [\"./persisted-grants-list.component.scss\"],\r\n    providers: [PersistedGrantsService]\r\n})\r\nexport class PersistedGrantListComponent implements OnInit {\r\n\r\n    public persistedGrants: PersistedGrant[];\r\n    grantDetail: PersistedGrant;\r\n\r\n    public total: number;\r\n    public page: number = 1;\r\n    public quantity: number = 10;\r\n    constructor(\r\n        public translator: TranslatorService,\r\n        private persistedGrantService: PersistedGrantsService,\r\n        public settings: SettingsService) { }\r\n\r\n    ngOnInit() {\r\n        this.loadGrants();\r\n    }\r\n\r\n    public loadGrants() {\r\n        this.persistedGrantService.getPersistedGrants(this.quantity, this.page).subscribe(a => {\r\n            this.persistedGrants = a.collection;\r\n            this.total = a.total;\r\n            this.persistedGrants.forEach(grant => grant.parsedData = JSON.parse(grant.data));\r\n        });\r\n    }\r\n\r\n    public remove(name: string) {\r\n        this.translator.translate.get('persistedGrant.remove').subscribe(m => {\r\n            Swal.fire({\r\n                title: m['title'],\r\n                text: m[\"text\"],\r\n                type: 'warning',\r\n                showCancelButton: true,\r\n                confirmButtonColor: '#DD6B55',\r\n                confirmButtonText: m[\"confirmButtonText\"],\r\n                cancelButtonText: m[\"cancelButtonText\"],\r\n\r\n            }).then(isConfirm => {\r\n                if (isConfirm) {\r\n\r\n                    this.persistedGrantService.remove(name).subscribe(\r\n                        () => {\r\n                            this.loadGrants();\r\n                            Swal.fire(\"Deleted!\", m[\"deleted\"], 'success');\r\n                        },\r\n                        err => {\r\n                            let errors = ProblemDetails.GetErrors(err).map(a => a.value);\r\n                            Swal.fire(\"Error!\", errors[0], 'error');\r\n                        }\r\n                    );\r\n\r\n\r\n                } else {\r\n                    Swal.fire(\"Cancelled\", m[\"cancelled\"], 'error');\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    public getData(data: string) {\r\n        return JSON.parse(data);\r\n    }\r\n\r\n    public details(id: string) {\r\n        this.grantDetail = this.persistedGrants.find(f => f.key == id);\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NgbPaginationModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { SharedModule } from '@shared/shared.module';\r\nimport { ToasterModule } from 'angular2-toaster';\r\nimport { TagInputModule } from 'ngx-chips';\r\n\r\nimport { PersistedGrantListComponent } from './list/persisted-grants-list.component';\r\n\r\nconst routes: Routes = [\r\n    { path: \"\", component: PersistedGrantListComponent },\r\n];\r\n\r\n@NgModule({\r\n    imports: [\r\n        SharedModule,\r\n        ToasterModule.forRoot(),\r\n        RouterModule.forChild(routes),\r\n        TagInputModule,\r\n        NgbPaginationModule\r\n    ],\r\n    declarations: [\r\n        PersistedGrantListComponent,\r\n    ],\r\n    exports: [\r\n        RouterModule\r\n    ]\r\n})\r\nexport class PersistedGrantsModule { }\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { SettingsService } from '@core/settings/settings.service';\r\nimport { environment } from '@env/environment';\r\nimport { ProblemDetails } from '@shared/viewModel/default-response.model';\r\nimport { ListOf } from '@shared/viewModel/list-of.model';\r\nimport { ListOfPersistedGrant, PersistedGrant } from '@shared/viewModel/persisted-grants.model';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class PersistedGrantsService {\r\n\r\n    endpoint: string;\r\n\r\n    constructor(private http: HttpClient, private settings: SettingsService) {\r\n        this.endpoint = environment.ResourceServer + \"api/persisted-grants\";\r\n    }\r\n\r\n    public getPersistedGrants(quantity: number, page: number): Observable<ListOf<PersistedGrant>> {\r\n        return this.http.get<ListOf<PersistedGrant>>(`${this.endpoint}?limit=${quantity}&offset=${(page - 1) * quantity}`);\r\n    }\r\n\r\n    public remove(key: string): Observable<void> {\r\n        return this.http.delete<void>(`${this.endpoint}/${btoa(key)}`);\r\n    }\r\n}\r\n","\r\nexport class KeyValuePair {\r\n    constructor(public key: string,\r\n        public value: string) { }\r\n}\r\n\r\nexport class ProblemDetails {\r\n\r\n    public success: boolean;\r\n\r\n    public static GetErrors(err: any): Array<KeyValuePair> {\r\n        try {\r\n            if (err.status === 403 || err.status === 404) {\r\n                return [new KeyValuePair(\"403\", \"Unauthorized Access\")];\r\n            }\r\n\r\n            if (err.error.errors) {\r\n                if (err.error.errors[\"DomainNotification\"]) {\r\n                    return err.error.errors[\"DomainNotification\"].map((element, i) => new KeyValuePair(i, element));\r\n                }\r\n                if (Array.isArray(err.error.errors)) { return err.error.errors.map((element, i) => new KeyValuePair(i, element.message)); }\r\n\r\n                let mappedErrors = [];\r\n                Object.keys(err.error.errors).map((key, index) => {\r\n                    if (Array.isArray(err.error.errors[key]))\r\n                        mappedErrors = mappedErrors.concat(err.error.errors[key].map((a, i) => new KeyValuePair(i, a)));\r\n                    else\r\n                        mappedErrors.push(new KeyValuePair(index.toString(), err.error.errors[key]));\r\n                });\r\n                return mappedErrors;\r\n            }\r\n\r\n\r\n\r\n            return [new KeyValuePair(err.error.status.toString(), \"Unknown error - \" + err.error.type)];\r\n        } catch (error) {\r\n            return [new KeyValuePair(\"500\", \"Unknown error\")];\r\n        }\r\n    }\r\n}\r\n\r\n","export class PersistedGrant {\r\n    /// <summary>\r\n    /// Gets or sets the key.\r\n    /// </summary>\r\n    /// <value>\r\n    /// The key.\r\n    /// </value>\r\n    public key: string;\r\n\r\n    /// <summary>\r\n    /// Gets the type.\r\n    /// </summary>\r\n    /// <value>\r\n    /// The type.\r\n    /// </value>\r\n    public type: string;\r\n\r\n    /// <summary>\r\n    /// Gets the subject identifier.\r\n    /// </summary>\r\n    /// <value>\r\n    /// The subject identifier.\r\n    /// </value>\r\n    public subjectId: string;\r\n\r\n    /// <summary>\r\n    /// Gets the client identifier.\r\n    /// </summary>\r\n    /// <value>\r\n    /// The client identifier.\r\n    /// </value>\r\n    public clientId: string;\r\n\r\n    /// <summary>\r\n    /// Gets or sets the creation time.\r\n    /// </summary>\r\n    /// <value>\r\n    /// The creation time.\r\n    /// </value>\r\n    public creationTime: string;\r\n\r\n    /// <summary>\r\n    /// Gets or sets the expiration.\r\n    /// </summary>\r\n    /// <value>\r\n    /// The expiration.\r\n    /// </value>\r\n    public expiration: string;\r\n\r\n    /// <summary>\r\n    /// Gets or sets the data.\r\n    /// </summary>\r\n    /// <value>\r\n    /// The data.\r\n    /// </value>\r\n    public data: string;\r\n\r\n    public email: string;\r\n\r\n    public picture: string;\r\n    public parsedData: any;\r\n}\r\n\r\nexport class ListOfPersistedGrant {\r\n    public persistedGrants: Array<PersistedGrant>;\r\n    public total: number;\r\n}\r\n"],"sourceRoot":""}